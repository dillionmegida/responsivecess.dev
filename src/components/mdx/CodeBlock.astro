---
const { html, css } = Astro.props

function makeid(length: number) {
  let result = ""
  const characters =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
  const charactersLength = characters.length
  let counter = 0
  while (counter < length) {
    result += characters.charAt(Math.floor(Math.random() * charactersLength))
    counter += 1
  }
  return result
}

const id = makeid(10)
---

<div id={id}>
  <div
    class="block"
    set:html={`
    ${html}
  
    <style>
      ${css}

      .block {
        border: 2px solid rgb(225, 255, 0);
        resize: horizontal;
        padding: 20px;
        overflow: hidden;
      }
    </style>
  `}
  />
</div>

<script is:inline define:vars={{ id }}>
  const host = document.getElementById(id)
  const block = host.querySelector(".block")

  const shadow = host.attachShadow({ mode: "open" })
  shadow.appendChild(block)
</script>